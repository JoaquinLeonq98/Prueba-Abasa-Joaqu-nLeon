---
import Layout from "../layouts/Layout.astro";
import ItemsList from "../components/React/ItemsList.tsx";
import { fetchItems } from "../lib/api";

const items = await fetchItems();
const pageTitle = "Catálogo de productos";
const pageDescription =
	"Encuentra artículos destacados con precios competitivos. Filtra por categoría y busca lo que necesites al instante.";
const pageSize = 12;
const queryPage = Number(Astro.url.searchParams.get("page") ?? "1");
const initialPage = Number.isFinite(queryPage) && queryPage > 0 ? queryPage : 1;
---

<Layout title={pageTitle} description={pageDescription}>
	<main class="mx-auto flex w-full max-w-6xl flex-col gap-12 px-4 py-12 sm:px-6 lg:px-8">
		<header class="flex flex-col gap-5 rounded-2xl border border-slate-200/60 bg-white/90 px-8 py-10 shadow-[0_16px_40px_rgba(52,52,53,0.06)] backdrop-blur supports-backdrop-filter:bg-white/70 dark:border-slate-700/60 dark:bg-slate-900/80 dark:shadow-[0_20px_50px_rgba(2,6,23,0.65)]">
			<p class="text-xs font-semibold uppercase tracking-[0.2em] text-slate-500 dark:text-slate-300">
				Colección
			</p>
			<div class="max-w-3xl space-y-4 text-slate-500 dark:text-slate-300">
				<h1 class="text-3xl font-semibold tracking-tight text-slate-900 sm:text-4xl dark:text-slate-100">
					{pageTitle}
				</h1>
				<p class="text-base sm:text-lg">{pageDescription}</p>
			</div>
		</header>
		<ItemsList client:load items={items} initialPage={initialPage} pageSize={pageSize} />
	</main>
</Layout>
